{% extends "views/_base/base.html" %}

{% block navigation %}
	<nav class="cc-navigation">
		<a href="/exercise-2-answer" class="cc-back-link">&#8592; Back to answer of exercise 2</a>
		<a href="/exercise-3-answer/" class="cc-answer-link">See answer &#8594;</a>
	</nav>
{% endblock %}

{% block introduction %}
	<h1>Answer: Exercise 3 - Applied Web Audio API</h1>
	<p>Validate the form and play a sound on success or error. Create the sound with the Web Audio API.</p>
{% endblock %}

{% block html %}
	<section class="cc-html-playground">
		<div class="play">
			<button class="play-button play-button--success">Play success audio</button>
			<button class="play-button play-button--error">Play error audio</button>
		</div>
		<form>
			<label class="text-field__label">
				<span>Write a text</span>
				<input class="text-field" type="text" required>
			</label>
			<button class="submit-button">Submit</button>
		</form>
	</section>
{% endblock %}

{% block scripts %}
	<script type="text/javascript">
		const successButton = document.querySelector('.play-button--success')
		const errorButton = document.querySelector('.play-button--error')
		successButton.addEventListener('click', playSuccessAudio)
		errorButton.addEventListener('click', playErrorAudio)

		const submitButton = document.querySelector('.submit-button')
		const textField = document.querySelector('.text-field')

		let audioCtx

		submitButton.addEventListener('click', someThing)

		function validateForm(e) {
			e.preventDefault()

			if (somethingIsTrue) {
				// playASound()
			} else {
				// playASound()
			}
		}

		function playSuccessAudio() {
			console.log('success')
			audioCtx = new AudioContext()

			// Create your own success sound
			// Use for example an oscillator with different effects (exponentialRampToValueAtTime or even add a BiquadFilter)

		}

		function playErrorAudio() {
			console.log('error')
			audioCtx = new AudioContext()

			// Create your own error sound
			// Use for example an oscillator with different effects (exponentialRampToValueAtTime or even add a BiquadFilter)
		}
	</script>
{% endblock %}

{% block styles %}
	<style type="text/css">
		.play {
			margin-bottom: 1rem;
		}

		span {
			display: block;
		}

		.text-field {
			padding: 1rem;
		}

		.play-button,
		.submit-button {
			background: tomato;
			color: white;
			padding: 1rem 2rem;
		}

		button[disabled] {
			background: gray;
		}
	</style>
{% endblock %}
